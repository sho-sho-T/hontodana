# hontodana 要件定義書

## 概要

個人の書籍を管理するWebアプリケーション「hontodana」は、物理書籍とKindle電子書籍を一つの本棚で管理し、読書の進捗を記録・可視化できるモダンなWebアプリです。本好きの人が自分の読書ライフを楽しく管理できることを目指しています。

## ユーザストーリー

### ストーリー1: 書籍の検索と登録

- **である** 読書好きのユーザー **として**
- **私は** Google Books APIを使って書籍を検索し、自分の本棚に登録 **をしたい**
- **そうすることで** 効率的に自分の蔵書を管理できる

### ストーリー2: 本棚での書籍表示

- **である** 蔵書を持つユーザー **として**  
- **私は** 登録した書籍をグリッドやリスト形式で表示 **をしたい**
- **そうすることで** 視覚的に本棚を確認し、読みたい本を見つけやすくする

### ストーリー3: 読書進捗の管理

- **である** 読書中のユーザー **として**
- **私は** 読んだページ数を記録し、進捗率を可視化 **をしたい**  
- **そうすることで** 読書のモチベーションを維持し、目標達成を実感できる

### ストーリー4: ウィッシュリスト管理

- **である** 新しい本を探すユーザー **として**
- **私は** 気になる本をウィッシュリストに追加し、優先度を設定 **をしたい**
- **そうすることで** 次に読む本を計画的に選べる

## 機能要件（EARS記法）

### 通常要件

- REQ-001: システムは Google Books API を使用して書籍を検索できなければならない
- REQ-002: システムは 検索結果から書籍を本棚に登録できなければならない
- REQ-003: システムは 登録された書籍をグリッド表示できなければならない
- REQ-004: システムは 登録された書籍をリスト表示できなければならない
- REQ-005: システムは 書籍の検索・フィルタリング機能を提供しなければならない
- REQ-006: システムは 読書ページ数を記録できなければならない
- REQ-007: システムは 読書進捗率を計算・表示できなければならない
- REQ-008: システムは 読書統計を表示できなければならない
- REQ-009: システムは ウィッシュリストに書籍を追加できなければならない
- REQ-010: システムは ウィッシュリストの書籍に優先度を設定できなければならない

### 条件付き要件

- REQ-101: ユーザーが書籍を検索した場合、システムは Google Books API から関連する書籍情報を取得して表示しなければならない
- REQ-102: ユーザーが本棚の表示形式を変更した場合、システムは グリッド表示とリスト表示を切り替えなければならない
- REQ-103: ユーザーが進捗を更新した場合、システムは 進捗率を自動計算して表示しなければならない
- REQ-104: ユーザーが書籍を検索・フィルタした場合、システムは 条件に一致する書籍のみを表示しなければならない
- REQ-105: ユーザーがウィッシュリストの優先度を変更した場合、システムは 優先度順で書籍を並べ替えなければならない

### 状態要件

- REQ-201: ユーザーがログインしている状態で、システムは ユーザー固有の本棚データを表示しなければならない
- REQ-202: 読書中の書籍がある状態で、システムは 進行中の読書統計を表示しなければならない
- REQ-203: ウィッシュリストに書籍がある状態で、システムは 優先度付きのウィッシュリストを表示しなければならない

### オプション要件

- REQ-301: システムは 書籍の評価・レビュー機能を提供してもよい
- REQ-302: システムは 読書目標の設定機能を提供してもよい
- REQ-303: システムは 読書カレンダー表示を提供してもよい
- REQ-304: システムは 書籍の貸し出し管理機能を提供してもよい

### 制約要件

- REQ-401: システムは 物理書籍と電子書籍を区別して管理しなければならない
- REQ-402: システムは Google Books API の利用制限に準拠しなければならない
- REQ-403: システムは ユーザーの個人情報を適切に保護しなければならない
- REQ-404: システムは レスポンシブデザインでモバイル対応しなければならない

## 非機能要件

### パフォーマンス

- NFR-001: システムは 書籍検索のレスポンス時間を3秒以内にしなければならない
- NFR-002: システムは 本棚の表示時間を2秒以内にしなければならない
- NFR-003: システムは 100冊の書籍を同時に表示できなければならない

### セキュリティ

- NFR-101: システムは ユーザー認証にSupabase Authを使用しなければならない
- NFR-102: システムは API通信をHTTPS暗号化しなければならない
- NFR-103: システムは ユーザーデータのアクセス制御を実装しなければならない

### ユーザビリティ

- NFR-201: システムは 直感的で使いやすいユーザーインターフェースを提供しなければならない
- NFR-202: システムは アクセシビリティガイドライン（WCAG 2.1 AA）に準拠しなければならない
- NFR-203: システムは モバイルデバイスで快適に操作できなければならない

### 可用性

- NFR-301: システムは 99%以上の稼働時間を維持しなければならない
- NFR-302: システムは 定期的なデータバックアップを実行しなければならない

### 保守性

- NFR-401: システムは TypeScript で型安全に実装しなければならない
- NFR-402: システムは テストカバレッジ80%以上を維持しなければならない
- NFR-403: システムは ESLint・Prettier でコード品質を管理しなければならない

## Edgeケース

### エラー処理

- EDGE-001: Google Books API が利用不可の場合、システムは 適切なエラーメッセージを表示し、代替手段を提供しなければならない
- EDGE-002: ネットワーク接続が不安定な場合、システムは オフライン対応とデータ同期機能を提供しなければならない
- EDGE-003: データベース接続エラーの場合、システムは エラー状態を表示し、復旧手順をガイドしなければならない

### 境界値

- EDGE-101: 書籍タイトルが255文字を超える場合、システムは 適切に省略表示しなければならない
- EDGE-102: ページ数が0または負の値の場合、システムは バリデーションエラーを表示しなければならない
- EDGE-103: ウィッシュリストが100冊を超える場合、システムは ページネーション機能を提供しなければならない

### データ整合性

- EDGE-201: 同じ書籍が重複登録される場合、システムは 重複チェックと統合機能を提供しなければならない
- EDGE-202: 読書進捗がページ数を超える場合、システムは 進捗を自動調整しなければならない
- EDGE-203: 削除された書籍に関連する進捗データがある場合、システムは データの整合性を保持しなければならない

## 受け入れ基準

### 機能テスト

- [ ] Google Books API から書籍検索ができる
- [ ] 検索結果から書籍を本棚に登録できる  
- [ ] 本棚でグリッド・リスト表示の切り替えができる
- [ ] 書籍の検索・フィルタリングができる
- [ ] 読書ページ数の記録ができる
- [ ] 進捗率の可視化が表示される
- [ ] 読書統計が表示される
- [ ] ウィッシュリストに書籍を追加できる
- [ ] ウィッシュリストの優先度設定ができる
- [ ] 物理書籍と電子書籍の区別ができる

### 非機能テスト

- [ ] 書籍検索のレスポンス時間が3秒以内
- [ ] 本棚表示時間が2秒以内
- [ ] 100冊同時表示が可能
- [ ] HTTPS暗号化通信が実装されている
- [ ] ユーザー認証が正常に動作する
- [ ] モバイル対応のレスポンシブデザイン
- [ ] アクセシビリティガイドライン準拠
- [ ] テストカバレッジ80%以上

### エラーハンドリングテスト

- [ ] API接続エラー時の適切なエラー表示
- [ ] ネットワーク不安定時のオフライン対応
- [ ] 入力値バリデーションが正常に動作
- [ ] 重複データの適切な処理
- [ ] データ整合性の保持

### セキュリティテスト

- [ ] 不正アクセスの防止
- [ ] データ漏洩の防止
- [ ] SQL インジェクション対策
- [ ] XSS 攻撃対策
- [ ] CSRF 攻撃対策